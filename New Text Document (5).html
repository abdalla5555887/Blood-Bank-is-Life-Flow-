<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ูุนูููุงุช ุณูุงุณุงุช ุจูู ุงูุฏู - 2023</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&display=swap');
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .nav-item.active {
            background-color: #ef4444; /* Red 500 */
            color: white;
            font-weight: bold;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }
    </style>
    <!-- Chosen Palette: Clean Medical Theme - Primary: Red (Blood/Urgency) #ef4444, Secondary: Slate/Gray (Structure) #f8fafc, Accent: Teal (Safety/Medical) #14b8a6. Background is light for readability. -->
    <!-- Application Structure Plan: The app is structured as a Dashboard/Guide with 4 main tabs. 
         1. 'Principles & Ethics': Translates the textual ethical rules into interactive cards.
         2. 'Donor Standards': Focuses on operational standards and selection criteria.
         3. 'Quality & Waste Control': Visualizes the statistical models for blood discard reasons using Chart.js.
         4. 'Inventory & Efficiency': interactive metrics showing inflow/outflow logic and efficiency indicators.
         This structure was chosen to separate 'Policy/Theory' from 'Operational/Data' aspects, making the dense report digestible. -->
    <!-- Visualization & Content Choices: 
         - Ethics: Grid of Cards with hover effects (Text -> Card -> Exploration).
         - Waste Data: Doughnut Chart for categories (Viral vs Technical vs Expiry) and Bar Chart for Technical breakdowns (Hemolysis, Clots, etc). Goal: Visualizing the quality control metrics.
         - Inventory: Line Chart simulating monthly trends of Incoming vs Outgoing to demonstrate the report's tracking fields.
         - Logic: Vanilla JS handles tab switching and Chart.js rendering/destruction to ensure performance.
         - Icons: Unicode emojis used instead of SVGs. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-slate-800">

    <!-- Navigation Bar -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2 space-x-reverse">
                <div class="text-3xl">๐ฉธ</div>
                <div>
                    <h1 class="text-xl font-bold text-slate-800">ุณูุงุณุงุช ุจูู ุงูุฏู 2023</h1>
                    <p class="text-xs text-slate-500">ุงูููุฆุฉ ุงูุนุงูุฉ ููุชุฃููู ุงูุตุญู</p>
                </div>
            </div>
            <div class="hidden md:flex space-x-1 space-x-reverse bg-slate-100 p-1 rounded-lg">
                <button onclick="app.navigate('principles')" class="nav-item px-4 py-2 rounded-md text-sm transition-all-300" id="nav-principles">ุงููุจุงุฏุฆ ุงูุฃุฎูุงููุฉ</button>
                <button onclick="app.navigate('operations')" class="nav-item px-4 py-2 rounded-md text-sm transition-all-300" id="nav-operations">ุงููุนุงููุฑ ุงูุชุดุบูููุฉ</button>
                <button onclick="app.navigate('waste')" class="nav-item px-4 py-2 rounded-md text-sm transition-all-300" id="nav-waste">ูุคุดุฑุงุช ุงููุฏุฑ ูุงูุฌูุฏุฉ</button>
                <button onclick="app.navigate('inventory')" class="nav-item px-4 py-2 rounded-md text-sm transition-all-300" id="nav-inventory">ุงูุฑุตูุฏ ูุงูููุงุกุฉ</button>
            </div>
            <!-- Mobile Menu Button (simplified interaction) -->
            <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="md:hidden text-2xl">โฐ</button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t p-4 flex flex-col space-y-2">
            <button onclick="app.navigate('principles')" class="text-right px-4 py-2 hover:bg-slate-100 rounded">ุงููุจุงุฏุฆ ุงูุฃุฎูุงููุฉ</button>
            <button onclick="app.navigate('operations')" class="text-right px-4 py-2 hover:bg-slate-100 rounded">ุงููุนุงููุฑ ุงูุชุดุบูููุฉ</button>
            <button onclick="app.navigate('waste')" class="text-right px-4 py-2 hover:bg-slate-100 rounded">ูุคุดุฑุงุช ุงููุฏุฑ ูุงูุฌูุฏุฉ</button>
            <button onclick="app.navigate('inventory')" class="text-right px-4 py-2 hover:bg-slate-100 rounded">ุงูุฑุตูุฏ ูุงูููุงุกุฉ</button>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main id="app-content" class="container mx-auto px-4 py-8 min-h-screen">
        <!-- Content will be injected here via JS -->
    </main>

    <footer class="bg-slate-800 text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p class="text-sm opacity-75">ุชู ุชุทููุฑ ูุฐุง ุงูุชุทุจูู ุงูุชูุงุนูู ุจูุงุกู ุนูู "ูุซููุฉ ููุงุนุฏ ุงูุชุจุฑุน ุจุงูุฏู ูู ุฌูููุฑูุฉ ูุตุฑ ุงูุนุฑุจูุฉ 2023".</p>
            <p class="text-xs mt-2 opacity-50">ุญููู ุงูููููุฉ ุงูููุฑูุฉ ูููุญุชูู ูุญููุธุฉ ููููุฆุฉ ุงูุนุงูุฉ ููุชุฃููู ุงูุตุญู - ุงูุฅุฏุงุฑุฉ ุงูุนุงูุฉ ููุฎุฏูุงุช ุงูุทุจูุฉ.</p>
        </div>
    </footer>

    <script>
        // --- Data & State Management ---
        const appData = {
            principles: [
                {
                    title: "ุงููุณุคูููุฉ ุงููุฌุชูุนูุฉ",
                    icon: "๐ค",
                    content: "ุงูุชุจุฑุน ุจุงูุฏู ูู ูุงุฌุจ ุฅูุณุงูู ููุณุคูููุฉ ุชูุน ุนูู ุนุงุชู ูู ุดุฎุต ูุงุฆู ุทุจูุงู. ุงููุฏู ูู ุฅุนูุงุก ููู ุงูุฅูุซุงุฑ ูุงูุชูุงูู ุงููุฌุชูุนู ูุถูุงู ุชููุฑ ุงูุฏู ูููุญุชุงุฌูู.",
                    highlight: "ูุณุคูููุฉ ูู ุฅูุณุงู ูุงุฆู"
                },
                {
                    title: "ุงูุชุจุฑุน ุงูุทูุนู ุงูุดุฑูู",
                    icon: "๐",
                    content: "ูุนุชูุฏ ุงููุฎุฒูู ุงูุงุณุชุฑุงุชูุฌู ุฃุณุงุณุงู ุนูู ุงููุชุจุฑุนูู ุงููุชุทูุนูู ุฏูู ููุงุจู. ููุนุฑู ุงูุชุจุฑุน ุบูุฑ ุงููุฏููุน ุจุฃูู ูุงุจุน ูู ูุญุถ ุฅุฑุงุฏุฉ ุงูุดุฎุต ุฏูู ุชููู ููุฏ ุฃู ูุฏุงูุง ุนูููุฉ.",
                    highlight: "ุงููุฑุทุจุงุช ุงูุจุณูุทุฉ ูุง ุชุฎุงูู ุงูุชุทูุน"
                },
                {
                    title: "ุงูุงุณุชุจุฏุงู ุงูุนุงุฆูู",
                    icon: "๐จโ๐ฉโ๐งโ๐ฆ",
                    content: "ูู ุญุงูุงุช ุชุจุฑุน ุงูุฃูุงุฑุจุ ูููุถู ุงูุชุจุฑุน 'ุบูุฑ ุงูููุฌู'. ูุฐุง ูุนูู ุฃู ุงูุฏู ูุฏุฎู ููุฑุตูุฏ ุงูุนุงู ูููุตุฑู ูููุฑูุถ ุงูุฃูุณุจ ุทุจูุงูุ ูุถูุงู ุงูุนุฏุงูุฉ ูุฌูุฏุฉ ุงูุฏู ุงูููููู.",
                    highlight: "ุงูุชุจุฑุน ุบูุฑ ุงูููุฌู ูู ุงูุฃูุถู"
                },
                {
                    title: "ุงูููุงููุฉ ุงููุณุชููุฑุฉ",
                    icon: "๐",
                    content: "ูุฌุจ ุชูุนูุฉ ุงููุชุจุฑุน ุจููุงุฆุฏ ููุฎุงุทุฑ ุงูุชุจุฑุน. ูููุฒู ุงููุชุจุฑุน ุจุงูุชูููุน ุนูู ุฅูุฑุงุฑ ุจุงูููุงููุฉ ุนูู ุณุญุจ ุงูุฏู ูุงุณุชุฎุฏุงููุ ุญูุงูุฉู ูุญูููู ููุถูุงู ุงููุฃููููุฉ.",
                    highlight: "ุญูุงูุฉ ูุณูุงูุฉ ุงููุชุจุฑุน ุฃููููุฉ"
                }
            ],
            wasteReasons: {
                labels: ["ุงูุชูุงุก ุงูุตูุงุญูุฉ", "ุฃุณุจุงุจ ููุฑูุณูุฉ", "ุฃุณุจุงุจ ูููุฉ/ุชูููุฉ"],
                data: [15, 10, 25], // Synthetic data representing proportions for visualization
                details: "ุชุดูุฑ ุงูุณูุงุณุงุช ุฅูู ุถุฑูุฑุฉ ุฑุตุฏ ุงููุญุฏุงุช ุงูุชู ูุชู ุฅุนุฏุงููุง ููุงุฑูุฉ ุจุงููุงุฑุฏ ูุชูููู ุงููุฏุฑ."
            },
            technicalReasons: {
                labels: ["ุนุฏู ุงูุชูุงู ุงูุชุจุฑุน", "ุชูุณูุฑ ูุฑุงุช ุงูุฏู (Hemolysis)", "ูุฌูุฏ ุชุฌูุทุงุช", "ุงุฑุชูุงุน ุงูุฏููู/ุงูุตูุฑุงุก", "ุฅูุฌุงุจูุฉ ุงุฎุชุจุงุฑ Coombs", "ุงูุฎูุงุถ ุงููููุงุชููุฑูุช"],
                data: [5, 3, 4, 6, 2, 5], // Synthetic breakdown
                details: "ุงูุฃุณุจุงุจ ุงููููุฉ ุชุนูุณ ููุงุกุฉ ุนูููุฉ ุงูุณุญุจ ูุงูุงุฎุชูุงุฑ ุงูุทุจู."
            },
            inventory: {
                months: ["ููุงูุฑ", "ูุจุฑุงูุฑ", "ูุงุฑุณ", "ุฃุจุฑูู", "ูุงูู", "ููููู"],
                incoming: [120, 135, 110, 145, 130, 150],
                outgoing: [110, 125, 105, 130, 128, 140]
            }
        };

        const app = {
            state: {
                currentTab: 'principles',
                charts: {}
            },

            init: () => {
                app.navigate('principles');
            },

            navigate: (tabId) => {
                app.state.currentTab = tabId;
                
                // Update UI classes
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                const activeBtn = document.getElementById(`nav-${tabId}`);
                if(activeBtn) activeBtn.classList.add('active');

                // Render Content
                const contentDiv = document.getElementById('app-content');
                contentDiv.innerHTML = ''; // Clear current content
                
                // Hide mobile menu if open
                document.getElementById('mobile-menu').classList.add('hidden');

                switch(tabId) {
                    case 'principles':
                        app.renderPrinciples(contentDiv);
                        break;
                    case 'operations':
                        app.renderOperations(contentDiv);
                        break;
                    case 'waste':
                        app.renderWaste(contentDiv);
                        break;
                    case 'inventory':
                        app.renderInventory(contentDiv);
                        break;
                }
                
                // Scroll to top
                window.scrollTo(0, 0);
            },

            renderPrinciples: (container) => {
                container.innerHTML = `
                    <div class="animate-fade-in space-y-8">
                        <div class="text-center max-w-3xl mx-auto mb-10">
                            <h2 class="text-3xl font-bold text-slate-800 mb-4">ุงููุจุงุฏุฆ ุงูุฃุฎูุงููุฉ ููุชุจุฑุน ุจุงูุฏู</h2>
                            <p class="text-lg text-slate-600 leading-relaxed">
                                ูุฑุชูุฒ ูุธุงู ุจููู ุงูุฏู ุงููุตุฑู ุนูู ูุฌููุนุฉ ูู ุงูููู ุงูุฃุฎูุงููุฉ ุงูุฑุงุณุฎุฉ ุงูุชู ุชูุฏู ูุถูุงู ุณูุงูุฉ ุงููุชุจุฑุน ููุฃููููุฉ ุงูุฏู.
                                ูุณุชุนุฑุถ ูุฐุง ุงููุณู ุงูุฑูุงุฆุฒ ุงูุฃุฑุจุนุฉ ุงูุฃุณุงุณูุฉ ุงููุฐููุฑุฉ ูู ุงููุซููุฉ.
                            </p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${appData.principles.map(item => `
                                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 card-hover transition-all-300 group cursor-default">
                                    <div class="flex items-start space-x-4 space-x-reverse">
                                        <div class="text-4xl bg-red-50 p-3 rounded-full mb-4 group-hover:scale-110 transition-transform">${item.icon}</div>
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-800 mb-2 group-hover:text-red-600 transition-colors">${item.title}</h3>
                                            <p class="text-slate-600 leading-relaxed">${item.content}</p>
                                            <span class="inline-block mt-3 text-xs font-semibold text-teal-600 bg-teal-50 px-2 py-1 rounded border border-teal-100">
                                                ๐ก ${item.highlight}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        <div class="mt-12 bg-blue-50 border-r-4 border-blue-500 p-6 rounded-lg shadow-sm">
                            <h3 class="font-bold text-blue-800 text-lg mb-2">โน๏ธ ุชุนุฑูู ุงูุชุจุฑุน ุงูุดุฑูู</h3>
                            <p class="text-blue-700">
                                ุชุคูุฏ ุงูุณูุงุณุงุช ุฃู ุชูุฏูู ุงููุฑุทุจุงุช ุงูุจุณูุทุฉ ูููุชุจุฑุน ุจุนุฏ ุนูููุฉ ุงูุณุญุจ ูุง ูุชุนุงุฑุถ ูุน ูุจุฏุฃ ุงูุชุทูุนุ ุจูููุง ููููุน ููุนุงู ุจุงุชุงู ุฃู ููุงุจู ูุงุฏู ูุจุงุดุฑ ุฃู ุนููู ูุจูุฑ.
                            </p>
                        </div>
                    </div>
                `;
            },

            renderOperations: (container) => {
                container.innerHTML = `
                    <div class="animate-fade-in space-y-8">
                         <div class="max-w-4xl mx-auto text-center mb-8">
                            <h2 class="text-3xl font-bold text-slate-800 mb-4">ุงููุนุงููุฑ ุงูุชุดุบูููุฉ ูุถูุงู ุงูุณูุงูุฉ</h2>
                            <p class="text-lg text-slate-600">
                                ุชูุชุฒู ุจููู ุงูุฏู ุจุชุทุจูู ูุนุงููุฑ ููููุฉ ุตุงุฑูุฉ ูู ูุงูุฉ ุฎุทูุงุช ุงูุนููุ ุจุฏุกุงู ูู ุงุฎุชูุงุฑ ุงููุชุจุฑุน ูุญุชู ุตุฑู ุงููุญุฏุงุช.
                            </p>
                        </div>

                        <!-- Workflow Visualization using Flex/Grid (No SVG) -->
                        <div class="relative">
                            <div class="absolute inset-0 flex items-center" aria-hidden="true">
                                <div class="w-full border-t border-slate-200 lg:block hidden"></div>
                            </div>
                            <div class="relative flex flex-col lg:flex-row justify-between items-center space-y-8 lg:space-y-0">
                                
                                <!-- Step 1 -->
                                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 w-full lg:w-1/4 text-center z-10 relative">
                                    <div class="text-3xl mb-2">๐</div>
                                    <h3 class="font-bold text-lg mb-2">ุงูุงุฎุชูุงุฑ ุงูุทุจู</h3>
                                    <p class="text-sm text-slate-500">ูุญุต ุงููุชุจุฑุน ููู ูุนุงููุฑ ุทุจูุฉ ูุญุฏุซุฉ ุจุงูุชุธุงู ูุถูุงู ุฎููู ูู ุงูุฃูุฑุงุถ ููุฏุฑุชู ุงูุตุญูุฉ.</p>
                                </div>

                                <!-- Arrow Mobile -->
                                <div class="lg:hidden text-2xl text-slate-300">โฌ๏ธ</div>

                                <!-- Step 2 -->
                                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 w-full lg:w-1/4 text-center z-10 relative">
                                    <div class="text-3xl mb-2">๐งช</div>
                                    <h3 class="font-bold text-lg mb-2">ุงููุญุต ุงูููุฑูุณู</h3>
                                    <p class="text-sm text-slate-500">ุชุญููู ุงููุญุฏุงุช ูููุดู ุนู C, B, HIV, Syphilis ููู ุงูุจุฑูุชููููุงุช ุงูููููุฉ.</p>
                                </div>

                                <!-- Arrow Mobile -->
                                <div class="lg:hidden text-2xl text-slate-300">โฌ๏ธ</div>

                                <!-- Step 3 -->
                                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 w-full lg:w-1/4 text-center z-10 relative">
                                    <div class="text-3xl mb-2">โ๏ธ</div>
                                    <h3 class="font-bold text-lg mb-2">ุงููุตู ูุงูุชุฎุฒูู</h3>
                                    <p class="text-sm text-slate-500">ูุตู ุงูููููุงุช ูุญูุธูุง ูู ุฏุฑุฌุงุช ุญุฑุงุฑุฉ ููุงุณูุฉ ููุฑุงูุจุฉ ุงูุตูุงุญูุฉ ุจุฏูุฉ.</p>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12">
                             <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-red-500">
                                <h3 class="font-bold text-xl mb-4">โ๏ธ ูุนุงููุฑ ุงูุฑูุถ ูุงูุญุธุฑ</h3>
                                <ul class="space-y-3">
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-red-500 text-xl">โข</span>
                                        ุฅูุฌุงุจูุฉ ุงููุญูุตุงุช ุงูููุฑูุณูุฉ.
                                    </li>
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-red-500 text-xl">โข</span>
                                        ุงูุชุงุฑูุฎ ุงููุฑุถู ุงูุฐู ูุดูู ุฎุทุฑุงู ุนูู ุงููุชุจุฑุน.
                                    </li>
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-red-500 text-xl">โข</span>
                                        ุงูุณููููุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ.
                                    </li>
                                </ul>
                            </div>
                             <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-green-500">
                                <h3 class="font-bold text-xl mb-4">โ ุญููู ุงููุชุจุฑุน</h3>
                                <ul class="space-y-3">
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-green-500 text-xl">โ</span>
                                        ุงูุญุตูู ุนูู ุดุฑุญ ูุงูู ูููุฎุงุทุฑ ูุงูููุงุฆุฏ.
                                    </li>
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-green-500 text-xl">โ</span>
                                        ุณุฑูุฉ ุงููุนูููุงุช ูุงููุชุงุฆุฌ ุงูุทุจูุฉ.
                                    </li>
                                    <li class="flex items-center text-slate-700">
                                        <span class="ml-2 text-green-500 text-xl">โ</span>
                                        ุฅููุงููุฉ ุงูุงูุณุญุงุจ ูู ุงูุชุจุฑุน ูู ุฃู ููุช.
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            },

            renderWaste: (container) => {
                container.innerHTML = `
                    <div class="animate-fade-in space-y-8">
                        <div class="text-center max-w-3xl mx-auto mb-6">
                            <h2 class="text-3xl font-bold text-slate-800 mb-2">ูุฑุงูุจุฉ ุงูุฌูุฏุฉ ููุนุฏูุงุช ุงููุฏุฑ</h2>
                            <p class="text-slate-600">
                                ูุชุทูุจ ูููุฐุฌ ุงูุฅุญุตุงุฆูุงุช ุงูุดูุฑู ุฑุตุฏุงู ุฏูููุงู ูุฃุณุจุงุจ ุฅุนุฏุงู ูุญุฏุงุช ุงูุฏู ูุฑูุน ุงูููุงุกุฉ ูุชูููู ุงููุงูุฏ.
                                ุงูุจูุงูุงุช ุฃุฏูุงู ุชูุถูุญูุฉ ูุจูุงู ููููุฉ ุชุตููู ุฃุณุจุงุจ ุงูุฅุนุฏุงู ูู ุงูุชูุฑูุฑ.
                            </p>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <!-- Main Waste Categories Chart -->
                            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-100">
                                <h3 class="font-bold text-lg text-slate-800 mb-4 text-center">ุชูุฒูุน ุฃุณุจุงุจ ุฅุนุฏุงู ุงูุฏู</h3>
                                <div class="chart-container">
                                    <canvas id="wasteChart"></canvas>
                                </div>
                                <p class="text-xs text-center text-slate-400 mt-2">ุจูุงูุงุช ูููุฐุฌูุฉ ูููุญุงูุงุฉ</p>
                                <div class="mt-4 text-sm text-slate-600 bg-slate-50 p-3 rounded">
                                    <strong>ุชุญููู:</strong> ูุชู ููุงุฑูุฉ ุนุฏุฏ ุงููุญุฏุงุช ุงููุนุฏูุฉ (ุจุณุจุจ ุงูุชูุงุก ุงูุตูุงุญูุฉ ุฃู ุงูููุฑูุณุงุช) ุจุฅุฌูุงูู ุงููุงุฑุฏ ูุชูููู ููุงุกุฉ ุฅุฏุงุฑุฉ ุงููุฎุฒูู.
                                </div>
                            </div>

                            <!-- Technical Reasons Chart -->
                            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-100">
                                <h3 class="font-bold text-lg text-slate-800 mb-4 text-center">ุชูุตูู ุงูุฃุณุจุงุจ ุงููููุฉ ููุฅุนุฏุงู</h3>
                                <div class="chart-container">
                                    <canvas id="techReasonChart"></canvas>
                                </div>
                                <p class="text-xs text-center text-slate-400 mt-2">ุจูุงูุงุช ูููุฐุฌูุฉ ูููุญุงูุงุฉ</p>
                                <div class="mt-4 grid grid-cols-2 gap-2 text-xs text-slate-600">
                                    <div class="bg-red-50 p-2 rounded"><strong>ุชูุณูุฑ ุงูุฏู (Hemolysis):</strong> ูุคุดุฑ ุนูู ูุดุงูู ูู ุงูุณุญุจ ุฃู ุงูุชุฎุฒูู.</div>
                                    <div class="bg-red-50 p-2 rounded"><strong>ุชุฌูุทุงุช:</strong> ุชุฏู ุนูู ุจุทุก ุณุญุจ ุงูุฏู ุฃู ุนุฏู ูุฒุฌู ุจูุงูุน ุงูุชุฌูุท ุฌูุฏุงู.</div>
                                </div>
                            </div>
                        </div>

                        <!-- Technical Terms Glossary -->
                        <div class="bg-white p-6 rounded-xl shadow-sm mt-8">
                            <h3 class="font-bold text-lg mb-4 border-b pb-2">๐ ูุตุทูุญุงุช ูููุฉ ูู ุชูุงุฑูุฑ ุงูุฅุนุฏุงู</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <span class="font-bold text-slate-800 block">ุงุฎุชุจุงุฑ Coombs ุงูููุฌุจ</span>
                                    <span class="text-sm text-slate-500">ูุฏู ุนูู ูุฌูุฏ ุฃุฌุณุงู ูุถุงุฏุฉ ูุฏ ุชุณุจุจ ุชุญูู ุงูุฏู.</span>
                                </div>
                                <div>
                                    <span class="font-bold text-slate-800 block">ุงุฑุชูุงุน ูุณุจุฉ ุงูุฏููู (Lipemia)</span>
                                    <span class="text-sm text-slate-500">ูุฌุนู ุงูุจูุงุฒูุง ุนูุฑุฉ ููููุน ุงุณุชุฎุฏุงููุงุ ุบุงูุจุงู ุจุณุจุจ ุชูุงูู ุงููุชุจุฑุน ูุฌุจุฉ ุฏุณูุฉ.</span>
                                </div>
                                <div>
                                    <span class="font-bold text-slate-800 block">ุนุฏู ุงูุชูุงู ุงูุชุจุฑุน</span>
                                    <span class="text-sm text-slate-500">ูุญุฏุงุช ุชุญุชูู ุนูู ูููุฉ ุฏู ุฃูู ูู ุงููุงุฒูุ ููุง ูุฎุชู ูุนู ุชูุงุฒู ูุงูุน ุงูุชุฌูุท.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Initialize Charts after DOM injection
                setTimeout(() => {
                    app.initWasteCharts();
                }, 0);
            },

            renderInventory: (container) => {
                container.innerHTML = `
                    <div class="animate-fade-in space-y-8">
                        <div class="text-center max-w-3xl mx-auto mb-6">
                            <h2 class="text-3xl font-bold text-slate-800 mb-2">ูุคุดุฑุงุช ุงูุฑุตูุฏ ูุงูููุงุกุฉ</h2>
                            <p class="text-slate-600">
                                ุชูุฏู ุงูุณูุงุณุงุช ูุถูุงู ุชูุงุฒู ุจูู "ุงููุงุฑุฏ" (ุชุจุฑุนุงุช) ู "ุงูููุตุฑู" (ุงุญุชูุงุฌุงุช ุงููุฑุถู)ุ ูุน ูุฑุงูุจุฉ ูุคุดุฑุงุช ุณุฑุนุฉ ูููุงุกุฉ ุงูุชูููุฑ.
                            </p>
                        </div>

                        <!-- Main Inventory Chart -->
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-100 mb-8">
                            <h3 class="font-bold text-lg text-slate-800 mb-4 text-center">ุญุฑูุฉ ุงููุงุฑุฏ ูุงูููุตุฑู (ูุญุงูุงุฉ ูุตู ุณูููุฉ)</h3>
                            <div class="chart-container">
                                <canvas id="inventoryChart"></canvas>
                            </div>
                        </div>

                        <!-- KPIs Grid -->
                        <h3 class="font-bold text-xl text-slate-800 mb-4">ูุคุดุฑุงุช ููุงุกุฉ ุงูุฃุฏุงุก (KPIs)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <!-- KPI 1 -->
                            <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-100 hover:bg-indigo-100 transition-colors">
                                <div class="text-2xl mb-2">โก</div>
                                <h4 class="font-bold text-indigo-900 mb-2">ุงูุตุฑู ุงูุณุฑูุน (Immediate Spin)</h4>
                                <p class="text-sm text-indigo-700">
                                    ุนุฏุฏ ุงููุญุฏุงุช ุงูุชู ุชู ุตุฑููุง ุจุนุฏ ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุงูุชูุงูู ุจุงูุทุฑููุฉ ุงูุณุฑูุนุฉ. ูุคุดุฑ ุนูู ุงูุชุนุงูู ูุน ุญุงูุงุช ุงูุทูุงุฑุฆ.
                                </p>
                            </div>

                            <!-- KPI 2 -->
                            <div class="bg-amber-50 p-6 rounded-xl border border-amber-100 hover:bg-amber-100 transition-colors">
                                <div class="text-2xl mb-2">๐</div>
                                <h4 class="font-bold text-amber-900 mb-2">ุชูุงูู ุบูุฑ ูุชุทุงุจู</h4>
                                <p class="text-sm text-amber-700">
                                    ุนุฏุฏ ุงูุญุงูุงุช ุงูุชู ุตูุฑูุช ููุง ูุญุฏุงุช "ูุชูุงููุฉ" ูููู ูู ูุตููุฉ ูุฎุชููุฉ ูุถุฑูุฑุฉ ุทุจูุฉ (ูุซู ุตุฑู O- ููุฑูุถ A-).
                                </p>
                            </div>

                            <!-- KPI 3 -->
                            <div class="bg-emerald-50 p-6 rounded-xl border border-emerald-100 hover:bg-emerald-100 transition-colors">
                                <div class="text-2xl mb-2">๐ฅ</div>
                                <h4 class="font-bold text-emerald-900 mb-2">ุชุฑุดูุฏ ุงูุงุณุชููุงู</h4>
                                <p class="text-sm text-emerald-700">
                                    ุฑุตุฏ "ุงูุนูููุงุช ุงูุชู ุฃุฌุฑูุช ุจุฏูู ุชุญุถูุฑ ุฏู". ูุคุดุฑ ุนูู ุฏูุฉ ุทูุจ ุงูุฏู ูุนุฏู ุงูุญุฌุฒ ุบูุฑ ุงูุถุฑูุฑู ูููุญุฏุงุช.
                                </p>
                            </div>
                        </div>

                        <div class="bg-white p-6 mt-8 rounded-lg border-l-4 border-slate-400 shadow-sm">
                            <h4 class="font-bold text-slate-800">๐ ูุตุงุฏุฑ ุงููุงุฑุฏ ูู ุงูุชูุฑูุฑ</h4>
                            <p class="text-sm text-slate-600 mt-1">ูุตูู ุงูุชูุฑูุฑ ูุตุงุฏุฑ ุงูุฏู ุฅูู: <strong>ุชุจุฑุนุงุช ุฏุงุฎููุฉ</strong> (ุฏุงุฎู ุงููุณุชุดูู/ุงูุญููุงุช) ู <strong>ูุงุฑุฏ ูู ุจููู ุฏู ุฃุฎุฑู</strong> (ุงูุดุจูุฉ ุงูููููุฉ)ุ ูุถูุงู ุชุชุจุน ุงููุตุฏุฑ.</p>
                        </div>
                    </div>
                `;

                setTimeout(() => {
                    app.initInventoryCharts();
                }, 0);
            },

            // --- Chart Initialization Logic ---
            initWasteCharts: () => {
                const ctx1 = document.getElementById('wasteChart').getContext('2d');
                new Chart(ctx1, {
                    type: 'doughnut',
                    data: {
                        labels: appData.wasteReasons.labels,
                        datasets: [{
                            data: appData.wasteReasons.data,
                            backgroundColor: ['#f87171', '#fbbf24', '#60a5fa'], // Red, Amber, Blue
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom', labels: { font: { family: 'Tajawal' } } },
                            tooltip: { callbacks: { label: (ctx) => ` ${ctx.label}: ${ctx.raw}%` } }
                        }
                    }
                });

                const ctx2 = document.getElementById('techReasonChart').getContext('2d');
                new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: appData.technicalReasons.labels,
                        datasets: [{
                            label: 'ุนุฏุฏ ุงูุญุงูุงุช (ุงูุชุฑุงุถู)',
                            data: appData.technicalReasons.data,
                            backgroundColor: '#60a5fa',
                            borderRadius: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y', // Horizontal Bar for readable labels
                        scales: {
                            x: { beginAtZero: true }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: { titleFont: { family: 'Tajawal' }, bodyFont: { family: 'Tajawal' } }
                        }
                    }
                });
            },

            initInventoryCharts: () => {
                const ctx = document.getElementById('inventoryChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: appData.inventory.months,
                        datasets: [
                            {
                                label: 'ุงููุงุฑุฏ (ุชุจุฑุนุงุช + ุจููู ุฃุฎุฑู)',
                                data: appData.inventory.incoming,
                                borderColor: '#10b981', // Emerald
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                fill: true,
                                tension: 0.3
                            },
                            {
                                label: 'ุงูููุตุฑู (ูููุฑุถู)',
                                data: appData.inventory.outgoing,
                                borderColor: '#ef4444', // Red
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                fill: true,
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                        plugins: {
                            legend: { position: 'top', labels: { font: { family: 'Tajawal' } } },
                            tooltip: { titleFont: { family: 'Tajawal' }, bodyFont: { family: 'Tajawal' } }
                        },
                        scales: {
                            y: { beginAtZero: false } // Focus on the trend
                        }
                    }
                });
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', app.init);

    </script>
</body>
</html>